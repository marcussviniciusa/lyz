(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{3698:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var t=a(7876),r=a(4232),l=a(4842),i=a(2471),n=a(9099),d=a(1059),c=a(8230),x=a.n(c);let o=()=>{let{user:e,isAuthenticated:s,loading:a}=(0,i.As)(),c=(0,n.useRouter)(),[o,m]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{a||s||c.push("/auth/login")},[s,a,c]),(0,r.useEffect)(()=>{let e=async()=>{try{let e=await d.a7.getUserPlans();m(e.data.plans)}catch(e){console.error("Error fetching plans:",e)}finally{p(!1)}};s&&e()},[s]),a||!s)?(0,t.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Carregando..."}):(0,t.jsx)(l.A,{title:"Dashboard - Lyz",children:(0,t.jsx)("div",{className:"bg-gray-50 min-h-[calc(100vh-136px)] py-10",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Bem-vindo(a), ",null==e?void 0:e.name.split(" ")[0]]}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Gerenciamento de planos personalizados baseados em ciclicidade feminina"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"card bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Planos Criados"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:o.length}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Total de planos personalizados"})]}),(0,t.jsxs)("div",{className:"card bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Planos Finalizados"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:o.filter(e=>e.final_plan).length}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Planos com gera\xe7\xe3o completa"})]}),(0,t.jsxs)("div",{className:"card bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\xdaltimo Acesso"}),(0,t.jsx)("p",{className:"text-lg font-medium text-gray-700",children:e&&"last_login"in e?new Date(e.last_login).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Primeiro acesso"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Data e hora"})]})]}),(0,t.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Planos Recentes"}),(0,t.jsx)(x(),{href:"/plans/new",className:"btn-primary",children:"Novo Plano"})]}),(0,t.jsx)("div",{className:"px-6 py-4",children:h?(0,t.jsx)("p",{className:"text-center py-4 text-gray-500",children:"Carregando planos..."}):o.length>0?(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paciente"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data de Cria\xe7\xe3o"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.slice(0,5).map(e=>{var s;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(s=e.patient_data)||void 0===s?void 0:s.name)||"Sem nome"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"medical_nutritionist"===e.professional_type?"M\xe9dico/Nutricionista":"Outro Profissional"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.final_plan?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.final_plan?"Completo":"Em Progresso"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("pt-BR")}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,t.jsx)(x(),{href:"/plans/".concat(e.id),className:"text-primary-600 hover:text-primary-900 mr-4",children:"Visualizar"}),e.final_plan&&(0,t.jsx)(x(),{href:"/plans/".concat(e.id,"/export"),className:"text-primary-600 hover:text-primary-900",children:"Exportar"})]})]},e.id)})})]}),o.length>5&&(0,t.jsx)("div",{className:"px-6 py-3 flex justify-center",children:(0,t.jsx)(x(),{href:"/plans",className:"text-primary-600 font-medium hover:text-primary-700",children:"Ver todos os planos"})})]}):(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Voc\xea ainda n\xe3o possui planos criados."}),(0,t.jsx)(x(),{href:"/plans/new",className:"btn-primary",children:"Criar Primeiro Plano"})]})})]})]})})})}},4842:(e,s,a)=>{"use strict";a.d(s,{A:()=>x});var t=a(7876);a(4232);var r=a(7328),l=a.n(r),i=a(2471),n=a(8230),d=a.n(n),c=a(9099);let x=e=>{let{children:s,title:a="Lyz - Planos C\xedclicos Personalizados"}=e,{user:r,logout:n,isAuthenticated:x,isSuperadmin:o}=(0,i.As)(),m=(0,c.useRouter)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{children:[(0,t.jsx)("title",{children:a}),(0,t.jsx)("meta",{name:"description",content:"Sistema Lyz para planos personalizados baseados em ciclicidade feminina"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)(d(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"Lyz"})}),x&&(0,t.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,t.jsx)(d(),{href:"/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat("/dashboard"===m.pathname?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Dashboard"}),(0,t.jsx)(d(),{href:"/plans",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(m.pathname.startsWith("/plans")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Meus Planos"}),o&&(0,t.jsx)(d(),{href:"/admin/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(m.pathname.startsWith("/admin")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Administra\xe7\xe3o"})]})]}),(0,t.jsx)("div",{className:"flex items-center",children:x?(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Ol\xe1, ",null==r?void 0:r.name.split(" ")[0]]}),(0,t.jsx)("button",{onClick:n,className:"text-sm text-gray-700 hover:text-primary-600",children:"Sair"})]}):(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(d(),{href:"/auth/login",className:"text-sm font-medium text-gray-700 hover:text-primary-600",children:"Entrar"}),(0,t.jsx)(d(),{href:"/auth/register",className:"text-sm font-medium bg-primary-600 text-white px-3 py-1 rounded-md hover:bg-primary-700",children:"Registrar"})]})})]})})}),(0,t.jsx)("main",{className:"flex-grow",children:s}),(0,t.jsx)("footer",{className:"bg-white border-t border-gray-200 py-4 mt-auto",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["\xa9 ",new Date().getFullYear()," Lyz Healthcare. Todos os direitos reservados."]})})})]})]})}},7580:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(3698)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[695,636,593,792],()=>s(7580)),_N_E=e.O()}]);