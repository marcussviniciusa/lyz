(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{123:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var t=s(7876),r=s(4232),n=s(9099),i=s(8230),l=s.n(i),m=s(4842),o=s(2471),d=s(1059);let c={assimilation:{name:"Assimila\xe7\xe3o",items:[{name:"Digest\xe3o",value:0},{name:"Absor\xe7\xe3o",value:0},{name:"Microbioma/Disbiose",value:0},{name:"Permeabilidade",value:0},{name:"Alergia/Intoler\xe2ncia",value:0}],notes:""},defense_repair:{name:"Defesa e Repara\xe7\xe3o",items:[{name:"Imunidade",value:0},{name:"Inflama\xe7\xe3o",value:0},{name:"Infec\xe7\xe3o",value:0},{name:"Estresse Oxidativo",value:0},{name:"Cicatriza\xe7\xe3o",value:0}],notes:""},energy:{name:"Energia",items:[{name:"Produ\xe7\xe3o Energ\xe9tica",value:0},{name:"Fun\xe7\xe3o Mitocondrial",value:0},{name:"Atividade Tiroidiana",value:0},{name:"A\xe7\xfacar Sangu\xedneo",value:0},{name:"Condicionamento F\xedsico",value:0}],notes:""},biotransformation_elimination:{name:"Biotransforma\xe7\xe3o e Elimina\xe7\xe3o",items:[{name:"Toxicidade",value:0},{name:"Desintoxica\xe7\xe3o",value:0},{name:"Fun\xe7\xe3o Hep\xe1tica",value:0},{name:"Elimina\xe7\xe3o",value:0},{name:"Carga T\xf3xica Acumulada",value:0}],notes:""},transport:{name:"Transporte",items:[{name:"Cardiovascular",value:0},{name:"Linf\xe1tica",value:0},{name:"Circula\xe7\xe3o",value:0},{name:"Respira\xe7\xe3o",value:0},{name:"Permeabilidade Celular",value:0}],notes:""},communication:{name:"Comunica\xe7\xe3o",items:[{name:"Horm\xf4nios",value:0},{name:"Neurotransmissores",value:0},{name:"Sistema Imune",value:0},{name:"Sinais Celulares",value:0},{name:"Equil\xedbrio",value:0}],notes:""},structural_integrity:{name:"Integridade Estrutural",items:[{name:"Membranas",value:0},{name:"Sistema Esquel\xe9tico",value:0},{name:"Postura/Mec\xe2nica",value:0},{name:"Sistema Tegumentar",value:0},{name:"Sistema Muscular",value:0}],notes:""},notes:""},x=()=>{var e;let{user:a,loading:s}=(0,o.As)(),i=(0,n.useRouter)(),{id:x}=i.query,[u,h]=(0,r.useState)(null),[p,v]=(0,r.useState)(c),[f,b]=(0,r.useState)(!0),[j,g]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null),[w,_]=(0,r.useState)(null);(0,r.useEffect)(()=>{a||s||i.push("/auth/login")},[a,s,i]),(0,r.useEffect)(()=>{let e=async()=>{if(x)try{b(!0);let e=(await d.a7.getPlanById(x)).data.plan||null;h(e),(null==e?void 0:e.ifm_matrix)&&v(e.ifm_matrix),N(null)}catch(e){N("Erro ao carregar detalhes do plano: "+(e.message||"Tente novamente mais tarde")),console.error("Error fetching plan details:",e)}finally{b(!1)}};a&&x&&e()},[a,x]),(0,r.useEffect)(()=>{u&&(u.questionnaire_data?u.lab_results?u.tcm_observations?u.timeline_data||N("\xc9 necess\xe1rio preencher a timeline antes da matriz IFM"):N("\xc9 necess\xe1rio preencher as observa\xe7\xf5es TCM antes da matriz IFM"):N("\xc9 necess\xe1rio enviar os resultados laboratoriais antes da matriz IFM"):N("\xc9 necess\xe1rio preencher o question\xe1rio antes da matriz IFM"))},[u]);let I=(e,a,s)=>{v(t=>({...t,[e]:{...t[e],items:t[e].items.map((e,t)=>t===a?{...e,value:s}:e)}}))},M=(e,a)=>{v(s=>({...s,[e]:{...s[e],notes:a}}))},E=async e=>{if(e.preventDefault(),x)try{g(!0),_(null),N(null),await d.a7.updateIFMMatrix(x,p),_("Matriz IFM salva com sucesso!"),setTimeout(()=>{i.push("/plans/".concat(x,"/final"))},1500)}catch(e){N("Erro ao salvar matriz IFM: "+(e.message||"Tente novamente mais tarde")),console.error("Error saving IFM matrix:",e)}finally{g(!1)}},C=(e,a,s)=>(0,t.jsx)("div",{className:"flex space-x-1",children:[0,1,2,3].map(r=>(0,t.jsx)("button",{type:"button",onClick:()=>I(e,a,r),className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium\n              ".concat(s===r?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:r},r))});return s||f?(0,t.jsx)(m.A,{title:"Carregando Matriz IFM - Lyz",children:(0,t.jsx)("div",{className:"flex justify-center py-20",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"spinner-border h-10 w-10 text-primary-600 animate-spin"}),(0,t.jsx)("p",{className:"mt-4 text-lg text-gray-600",children:"Carregando dados..."})]})})}):a?!y||u&&u.questionnaire_data&&u.lab_results&&u.tcm_observations&&u.timeline_data?(0,t.jsx)(m.A,{title:"Matriz IFM - Lyz",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-10",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-primary","data-component-name":"IFMMatrixPage",children:"Matriz IFM"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Paciente: ",(null==u?void 0:null===(e=u.patient_data)||void 0===e?void 0:e.name)||""]})]}),(0,t.jsx)(l(),{href:"/plans/".concat(x),className:"btn-outline",children:"Voltar ao Plano"})]}),w&&(0,t.jsx)("div",{className:"mb-6 bg-green-50 p-4 rounded-md",children:(0,t.jsx)("p",{className:"text-green-700",children:w})}),y&&(null==u?void 0:u.questionnaire_data)&&(null==u?void 0:u.lab_results)&&(null==u?void 0:u.tcm_observations)&&(null==u?void 0:u.timeline_data)&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 p-4 rounded-md",children:(0,t.jsx)("p",{className:"text-red-700",children:y})}),(0,t.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Legenda"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium mr-2",children:"0"}),(0,t.jsx)("span",{children:"Sem impacto"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-xs font-medium mr-2",children:"1"}),(0,t.jsx)("span",{children:"Impacto leve"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-yellow-100 flex items-center justify-center text-xs font-medium mr-2",children:"2"}),(0,t.jsx)("span",{children:"Impacto moderado"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center text-xs font-medium mr-2",children:"3"}),(0,t.jsx)("span",{children:"Impacto severo"})]})]})]}),(0,t.jsxs)("form",{onSubmit:E,children:[(0,t.jsxs)("div",{className:"space-y-8",children:[Object.keys(p).filter(e=>"notes"!==e).map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-md p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:p[e].name}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Impacto"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p[e].items.map((a,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:C(e,s,a.value)})]},s))})]})}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Observa\xe7\xf5es sobre ",p[e].name]}),(0,t.jsx)("textarea",{value:p[e].notes,onChange:a=>M(e,a.target.value),rows:2,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Observa\xe7\xf5es sobre ".concat(p[e].name.toLowerCase())})]})]},e)),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Observa\xe7\xf5es Gerais"}),(0,t.jsx)("textarea",{value:p.notes,onChange:e=>{v(a=>({...a,notes:e.target.value}))},rows:4,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Observa\xe7\xf5es gerais sobre a matriz IFM e suas implica\xe7\xf5es para o plano de tratamento"})]})]}),(0,t.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[(0,t.jsx)(l(),{href:"/plans/".concat(x),className:"btn-outline",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:j,className:"btn-primary",children:j?"Salvando...":"Salvar e Continuar"})]})]})]})]})}):(0,t.jsx)(m.A,{title:"Etapa Anterior Pendente - Lyz",children:(0,t.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-10",children:(0,t.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-yellow-700 mb-2",children:"Etapa anterior pendente"}),(0,t.jsx)("p",{className:"text-yellow-600 mb-4",children:y}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[!(null==u?void 0:u.questionnaire_data)&&(0,t.jsx)(l(),{href:"/plans/".concat(x,"/questionnaire"),className:"btn-primary",children:"Ir para o Question\xe1rio"}),(null==u?void 0:u.questionnaire_data)&&!(null==u?void 0:u.lab_results)&&(0,t.jsx)(l(),{href:"/plans/".concat(x,"/lab"),className:"btn-primary",children:"Ir para Resultados Laboratoriais"}),(null==u?void 0:u.questionnaire_data)&&(null==u?void 0:u.lab_results)&&!(null==u?void 0:u.tcm_observations)&&(0,t.jsx)(l(),{href:"/plans/".concat(x,"/tcm"),className:"btn-primary",children:"Ir para Observa\xe7\xf5es TCM"}),(null==u?void 0:u.questionnaire_data)&&(null==u?void 0:u.lab_results)&&(null==u?void 0:u.tcm_observations)&&!(null==u?void 0:u.timeline_data)&&(0,t.jsx)(l(),{href:"/plans/".concat(x,"/timeline"),className:"btn-primary",children:"Ir para Timeline"}),(0,t.jsx)(l(),{href:"/plans/".concat(x),className:"btn-outline",children:"Voltar ao Plano"})]})]})})}):null}},4842:(e,a,s)=>{"use strict";s.d(a,{A:()=>d});var t=s(7876);s(4232);var r=s(7328),n=s.n(r),i=s(2471),l=s(8230),m=s.n(l),o=s(9099);let d=e=>{let{children:a,title:s="Lyz - Planos C\xedclicos Personalizados"}=e,{user:r,logout:l,isAuthenticated:d,isSuperadmin:c}=(0,i.As)(),x=(0,o.useRouter)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:s}),(0,t.jsx)("meta",{name:"description",content:"Sistema Lyz para planos personalizados baseados em ciclicidade feminina"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)(m(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"Lyz"})}),d&&(0,t.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,t.jsx)(m(),{href:"/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat("/dashboard"===x.pathname?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Dashboard"}),(0,t.jsx)(m(),{href:"/plans",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(x.pathname.startsWith("/plans")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Meus Planos"}),c&&(0,t.jsx)(m(),{href:"/admin/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(x.pathname.startsWith("/admin")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Administra\xe7\xe3o"})]})]}),(0,t.jsx)("div",{className:"flex items-center",children:d?(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Ol\xe1, ",null==r?void 0:r.name.split(" ")[0]]}),(0,t.jsx)("button",{onClick:l,className:"text-sm text-gray-700 hover:text-primary-600",children:"Sair"})]}):(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(m(),{href:"/auth/login",className:"text-sm font-medium text-gray-700 hover:text-primary-600",children:"Entrar"}),(0,t.jsx)(m(),{href:"/auth/register",className:"text-sm font-medium bg-primary-600 text-white px-3 py-1 rounded-md hover:bg-primary-700",children:"Registrar"})]})})]})})}),(0,t.jsx)("main",{className:"flex-grow",children:a}),(0,t.jsx)("footer",{className:"bg-white border-t border-gray-200 py-4 mt-auto",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["\xa9 ",new Date().getFullYear()," Lyz Healthcare. Todos os direitos reservados."]})})})]})]})}},9718:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/plans/[id]/ifm",function(){return s(123)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[695,636,593,792],()=>a(9718)),_N_E=e.O()}]);