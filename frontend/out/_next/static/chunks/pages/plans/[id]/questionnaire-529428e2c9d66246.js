(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{742:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>u});var r=s(7876),l=s(4232),i=s(9099),n=s(8230),t=s.n(n),o=s(4842),d=s(2471),c=s(1059),m=s(5454);let u=()=>{var e,a,s,n,u,x,g,p;let{user:h,loading:f}=(0,d.As)(),y=(0,i.useRouter)(),{id:v}=y.query,[j,b]=(0,l.useState)(null),[N,w]=(0,l.useState)({chiefComplaints:"",medicalHistory:"",familyHistory:"",medications:"",supplements:"",allergies:"",lifestyle:{diet:"",exercise:"",sleep:"",stress:""},menstrualCycle:{regular:!0,duration:28,painLevel:0,flow:"normal",symptoms:""},digestion:"",energy:"",additional:""}),[C,_]=(0,l.useState)(!0),[E,k]=(0,l.useState)(!1),[S,q]=(0,l.useState)(null),[P,A]=(0,l.useState)(null);(0,l.useEffect)(()=>{h||f||y.push("/auth/login")},[h,f,y]),(0,l.useEffect)(()=>{let e=async()=>{if(v)try{_(!0);let e=(await c.a7.getPlanById(v)).data.plan||null;b(e),(null==e?void 0:e.questionnaire_data)&&w(e.questionnaire_data),q(null)}catch(e){q("Erro ao carregar detalhes do plano: "+(e.message||"Tente novamente mais tarde")),console.error("Error fetching plan details:",e)}finally{_(!1)}};h&&v&&e()},[h,v]);let H=e=>{let{name:a,value:s}=e.target;if(a.includes(".")){let[e,r]=a.split(".");w(a=>({...a,[e]:{...a[e],[r]:s}}))}else w(e=>({...e,[a]:s}))},Q=(e,a)=>{w(s=>({...s,menstrualCycle:{...s.menstrualCycle,[e]:a}}))},L=(e,a)=>{w(s=>({...s,menstrualCycle:{...s.menstrualCycle,[e]:a}}))},D=async e=>{if(e.preventDefault(),v)try{k(!0),A(null),q(null),await c.a7.updateQuestionnaire(v,{questionnaire_data:N}),A("Question\xe1rio salvo com sucesso!"),setTimeout(()=>{y.push("/plans/".concat(v,"/lab"))},1500)}catch(e){q("Erro ao salvar question\xe1rio: "+(e.message||"Tente novamente mais tarde")),console.error("Error saving questionnaire:",e)}finally{k(!1)}};return f||C?(0,r.jsx)(o.A,{title:"Carregando Question\xe1rio - Lyz",children:(0,r.jsx)("div",{className:"flex justify-center py-20",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"spinner-border h-10 w-10 text-primary-600 animate-spin"}),(0,r.jsx)("p",{className:"mt-4 text-lg text-gray-600",children:"Carregando question\xe1rio..."})]})})}):h?S&&!j?(0,r.jsx)(o.A,{title:"Erro - Lyz",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-10",children:(0,r.jsxs)("div",{className:"bg-red-50 p-6 rounded-lg",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-red-700 mb-2",children:"Ocorreu um erro"}),(0,r.jsx)("p",{className:"text-red-600",children:S}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(t(),{href:"/plans",className:"text-primary-600 font-medium hover:text-primary-500",children:"â† Voltar para a lista de planos"})})]})})}):(0,r.jsx)(o.A,{title:"Question\xe1rio do Plano - Lyz",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-10",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-primary","data-component-name":"QuestionnaireForm",children:"Question\xe1rio de Sa\xfade"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Paciente: ",(null==j?void 0:null===(e=j.patient_data)||void 0===e?void 0:e.name)||""]})]}),(0,r.jsx)(t(),{href:"/plans/".concat(v),className:"btn-outline",children:"Voltar ao Plano"})]}),P&&(0,r.jsx)("div",{className:"mb-6 bg-green-50 p-4 rounded-md",children:(0,r.jsx)("p",{className:"text-green-700",children:P})}),S&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 p-4 rounded-md",children:(0,r.jsx)("p",{className:"text-red-700",children:S})}),(0,r.jsx)(m.A,{onFormDataChange:e=>w(e),currentData:N,formType:"questionnaire"}),(0,r.jsxs)("form",{onSubmit:D,className:"bg-white shadow-sm rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Queixas Principais"}),(0,r.jsx)("textarea",{name:"chiefComplaints",value:N.chiefComplaints,onChange:H,rows:4,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Descreva as queixas principais do paciente"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Hist\xf3rico M\xe9dico"}),(0,r.jsx)("textarea",{name:"medicalHistory",value:N.medicalHistory,onChange:H,rows:4,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Hist\xf3rico de condi\xe7\xf5es m\xe9dicas, cirurgias, hospitaliza\xe7\xf5es, etc."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Hist\xf3rico Familiar"}),(0,r.jsx)("textarea",{name:"familyHistory",value:N.familyHistory,onChange:H,rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Condi\xe7\xf5es m\xe9dicas familiares relevantes"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Medicamentos Atuais"}),(0,r.jsx)("textarea",{name:"medications",value:N.medications,onChange:H,rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Lista de medicamentos em uso"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Suplementos"}),(0,r.jsx)("textarea",{name:"supplements",value:N.supplements,onChange:H,rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Vitaminas, minerais, ervas, etc."})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Alergias"}),(0,r.jsx)("textarea",{name:"allergies",value:N.allergies,onChange:H,rows:2,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Alergias a medicamentos, alimentos ou ambientais"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estilo de Vida"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dieta"}),(0,r.jsx)("textarea",{name:"lifestyle.diet",value:N.lifestyle.diet,onChange:H,rows:2,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Padr\xf5es alimentares, restri\xe7\xf5es, etc."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exerc\xedcios"}),(0,r.jsx)("textarea",{name:"lifestyle.exercise",value:N.lifestyle.exercise,onChange:H,rows:2,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Frequ\xeancia, tipo, dura\xe7\xe3o"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sono"}),(0,r.jsx)("textarea",{name:"lifestyle.sleep",value:N.lifestyle.sleep,onChange:H,rows:2,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Qualidade, dura\xe7\xe3o, problemas"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estresse"}),(0,r.jsx)("textarea",{name:"lifestyle.stress",value:N.lifestyle.stress,onChange:H,rows:2,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"N\xedvel, fontes, t\xe9cnicas de gerenciamento"})]})]})]}),(null==j?void 0:null===(a=j.patient_data)||void 0===a?void 0:a.gender)==="female"&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ciclo Menstrual"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"O ciclo \xe9 regular?"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("label",{className:"inline-flex items-center",children:[(0,r.jsx)("input",{type:"radio",checked:(null===(s=N.menstrualCycle)||void 0===s?void 0:s.regular)===!0,onChange:()=>Q("regular",!0),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),(0,r.jsx)("span",{className:"ml-2",children:"Sim"})]}),(0,r.jsxs)("label",{className:"inline-flex items-center",children:[(0,r.jsx)("input",{type:"radio",checked:(null===(n=N.menstrualCycle)||void 0===n?void 0:n.regular)===!1,onChange:()=>Q("regular",!1),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),(0,r.jsx)("span",{className:"ml-2",children:"N\xe3o"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dura\xe7\xe3o m\xe9dia do ciclo (dias)"}),(0,r.jsx)("input",{type:"number",value:(null===(u=N.menstrualCycle)||void 0===u?void 0:u.duration)||28,onChange:e=>L("duration",parseInt(e.target.value)),min:"1",max:"60",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\xedvel de dor (0-10)"}),(0,r.jsx)("input",{type:"number",value:(null===(x=N.menstrualCycle)||void 0===x?void 0:x.painLevel)||0,onChange:e=>L("painLevel",parseInt(e.target.value)),min:"0",max:"10",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fluxo"}),(0,r.jsxs)("select",{value:(null===(g=N.menstrualCycle)||void 0===g?void 0:g.flow)||"normal",onChange:e=>{w(a=>({...a,menstrualCycle:{...a.menstrualCycle,flow:e.target.value}}))},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,r.jsx)("option",{value:"light",children:"Leve"}),(0,r.jsx)("option",{value:"normal",children:"Normal"}),(0,r.jsx)("option",{value:"heavy",children:"Intenso"}),(0,r.jsx)("option",{value:"irregular",children:"Irregular"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sintomas associados"}),(0,r.jsx)("textarea",{value:(null===(p=N.menstrualCycle)||void 0===p?void 0:p.symptoms)||"",onChange:e=>{w(a=>({...a,menstrualCycle:{...a.menstrualCycle,symptoms:e.target.value}}))},rows:2,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"TPM, c\xf3licas, incha\xe7o, mudan\xe7as de humor, etc."})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Digest\xe3o"}),(0,r.jsx)("textarea",{name:"digestion",value:N.digestion,onChange:H,rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Padr\xf5es digestivos, problemas, frequ\xeancia intestinal, etc."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"N\xedveis de Energia"}),(0,r.jsx)("textarea",{name:"energy",value:N.energy,onChange:H,rows:2,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Flutua\xe7\xf5es de energia ao longo do dia, fadiga, etc."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informa\xe7\xf5es Adicionais"}),(0,r.jsx)("textarea",{name:"additional",value:N.additional,onChange:H,rows:4,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Qualquer outra informa\xe7\xe3o relevante para o plano de sa\xfade"})]})]}),(0,r.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[(0,r.jsx)(t(),{href:"/plans/".concat(v),className:"btn-outline",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:E,className:"btn-primary",children:E?"Salvando...":"Salvar e Continuar"})]})]})]})}):null}},2860:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/plans/[id]/questionnaire",function(){return s(742)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[695,875,636,593,792],()=>a(2860)),_N_E=e.O()}]);