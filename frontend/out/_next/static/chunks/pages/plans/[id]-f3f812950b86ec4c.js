(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{2032:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/plans/[id]",function(){return r(3812)}])},3812:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>x});var t=r(7876),s=r(4232),l=r(9099),n=r(8230),c=r.n(n),i=r(4842),d=r(2471),o=r(1059);let m=(e,a)=>{switch(a){case"patient":return{complete:!0,current:!1};case"questionnaire":return{complete:!!e.questionnaire_data,current:!e.questionnaire_data&&!e.lab_results&&!e.tcm_observations};case"lab":return{complete:!!e.lab_results,current:!!e.questionnaire_data&&!e.lab_results&&!e.tcm_observations};case"tcm":return{complete:!!e.tcm_observations,current:!!e.lab_results&&!e.tcm_observations&&!e.timeline_data};case"timeline":return{complete:!!e.timeline_data,current:!!e.tcm_observations&&!e.timeline_data&&!e.ifm_matrix};case"ifm":return{complete:!!e.ifm_matrix,current:!!e.timeline_data&&!e.ifm_matrix&&!e.final_plan};case"final":return{complete:!!e.final_plan,current:!!e.ifm_matrix&&!e.final_plan};default:return{complete:!1,current:!1}}},x=()=>{let{user:e,loading:a}=(0,d.As)(),r=(0,l.useRouter)(),{id:n}=r.query,[x,p]=(0,s.useState)(null),[h,u]=(0,s.useState)(!0),[f,y]=(0,s.useState)(null);if((0,s.useEffect)(()=>{e||a||r.push("/auth/login")},[e,a,r]),(0,s.useEffect)(()=>{let a=async()=>{if(n)try{u(!0);let e=await o.a7.getPlanById(n);p(e.data.plan||null),y(null)}catch(e){y("Erro ao carregar detalhes do plano: "+(e.message||"Tente novamente mais tarde")),console.error("Error fetching plan details:",e)}finally{u(!1)}};e&&n&&a()},[e,n]),a||h)return(0,t.jsx)(i.A,{title:"Carregando Plano - Lyz",children:(0,t.jsx)("div",{className:"flex justify-center py-20",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"spinner-border h-10 w-10 text-primary-600 animate-spin"}),(0,t.jsx)("p",{className:"mt-4 text-lg text-gray-600",children:"Carregando detalhes do plano..."})]})})});if(!e)return null;if(f)return(0,t.jsx)(i.A,{title:"Erro - Lyz",children:(0,t.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-10",children:(0,t.jsxs)("div",{className:"bg-red-50 p-6 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-red-700 mb-2",children:"Ocorreu um erro"}),(0,t.jsx)("p",{className:"text-red-600",children:f}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(c(),{href:"/plans",className:"text-primary-600 font-medium hover:text-primary-500",children:"← Voltar para a lista de planos"})})]})})});if(!x)return(0,t.jsx)(i.A,{title:"Plano n\xe3o encontrado - Lyz",children:(0,t.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-10",children:(0,t.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-yellow-700 mb-2",children:"Plano n\xe3o encontrado"}),(0,t.jsx)("p",{className:"text-yellow-600",children:"O plano solicitado n\xe3o foi encontrado ou voc\xea n\xe3o tem permiss\xe3o para acess\xe1-lo."}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(c(),{href:"/plans",className:"text-primary-600 font-medium hover:text-primary-500",children:"← Voltar para a lista de planos"})})]})})});let g=m(x,"patient"),j=m(x,"questionnaire"),b=m(x,"lab"),N=m(x,"tcm"),v=m(x,"timeline"),_=m(x,"ifm"),w=m(x,"final");return(0,t.jsx)(i.A,{title:"Plano para ".concat(x.patient_data.name," - Lyz"),children:(0,t.jsx)("div",{className:"py-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c(),{href:"/plans",className:"text-primary-600 hover:text-primary-700",children:"← Voltar para a lista de planos"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h1",{className:"mt-2 text-2xl font-semibold text-gray-900 dark:text-white bg-transparent",children:["Plano para ",x.patient_data.name]}),(0,t.jsx)("p",{className:"text-base text-gray-800 dark:text-gray-200",children:"nutritionist"===x.professional_type?"Nutricionista":"doctor"===x.professional_type?"M\xe9dico":x.professional_type})]})]}),w.complete&&(0,t.jsx)("button",{onClick:()=>o.a7.exportPlan(x.id),className:"btn-secondary",children:"Exportar Plano"})]}),(0,t.jsxs)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[(0,t.jsxs)("div",{className:"px-4 py-5 sm:px-6 bg-gray-50",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Progresso do Plano"}),(0,t.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Complete todas as etapas para gerar o plano final."})]}),(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,t.jsxs)("nav",{"aria-label":"Progress",children:[(0,t.jsxs)("ol",{className:"space-y-4 md:flex md:space-y-0 md:space-x-8",children:[(0,t.jsx)("li",{className:"md:flex-1",children:(0,t.jsxs)(c(),{href:"/plans/".concat(x.id),className:"flex flex-col border-l-4 ".concat(g.complete?"border-green-500":g.current?"border-primary-500":"border-gray-200"," py-2 pl-4"),children:[(0,t.jsx)("span",{className:"text-xs font-semibold uppercase ".concat(g.complete?"text-green-600":"text-gray-500"),children:"Etapa 1"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Dados do Paciente"})]})}),(0,t.jsx)("li",{className:"md:flex-1",children:(0,t.jsxs)(c(),{href:"/plans/".concat(x.id,"/questionnaire"),className:"flex flex-col border-l-4 ".concat(j.complete?"border-green-500":j.current?"border-primary-500":"border-gray-200"," py-2 pl-4"),children:[(0,t.jsx)("span",{className:"text-xs font-semibold uppercase ".concat(j.complete?"text-green-600":"text-gray-500"),children:"Etapa 2"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Question\xe1rio"})]})}),(0,t.jsx)("li",{className:"md:flex-1",children:(0,t.jsxs)(c(),{href:"/plans/".concat(x.id,"/lab"),className:"flex flex-col border-l-4 ".concat(b.complete?"border-green-500":b.current?"border-primary-500":"border-gray-200"," py-2 pl-4"),children:[(0,t.jsx)("span",{className:"text-xs font-semibold uppercase ".concat(b.complete?"text-green-600":"text-gray-500"),children:"Etapa 3"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Resultados Lab"})]})}),(0,t.jsx)("li",{className:"md:flex-1",children:(0,t.jsxs)(c(),{href:"/plans/".concat(x.id,"/tcm"),className:"flex flex-col border-l-4 ".concat(N.complete?"border-green-500":N.current?"border-primary-500":"border-gray-200"," py-2 pl-4"),children:[(0,t.jsx)("span",{className:"text-xs font-semibold uppercase ".concat(N.complete?"text-green-600":"text-gray-500"),children:"Etapa 4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Observa\xe7\xf5es TCM"})]})})]}),(0,t.jsxs)("ol",{className:"mt-4 space-y-4 md:flex md:space-y-0 md:space-x-8",children:[(0,t.jsx)("li",{className:"md:flex-1",children:(0,t.jsxs)(c(),{href:"/plans/".concat(x.id,"/timeline"),className:"flex flex-col border-l-4 ".concat(v.complete?"border-green-500":v.current?"border-primary-500":"border-gray-200"," py-2 pl-4"),children:[(0,t.jsx)("span",{className:"text-xs font-semibold uppercase ".concat(v.complete?"text-green-600":"text-gray-500"),children:"Etapa 5"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Linha do Tempo"})]})}),(0,t.jsx)("li",{className:"md:flex-1",children:(0,t.jsxs)(c(),{href:"/plans/".concat(x.id,"/ifm"),className:"flex flex-col border-l-4 ".concat(_.complete?"border-green-500":_.current?"border-primary-500":"border-gray-200"," py-2 pl-4"),children:[(0,t.jsx)("span",{className:"text-xs font-semibold uppercase ".concat(_.complete?"text-green-600":"text-gray-500"),children:"Etapa 6"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Matriz IFM"})]})}),(0,t.jsx)("li",{className:"md:flex-1",children:(0,t.jsxs)(c(),{href:"/plans/".concat(x.id,"/final"),className:"flex flex-col border-l-4 ".concat(w.complete?"border-green-500":w.current?"border-primary-500":"border-gray-200"," py-2 pl-4"),children:[(0,t.jsx)("span",{className:"text-xs font-semibold uppercase ".concat(w.complete?"text-green-600":"text-gray-500"),children:"Etapa 7"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Plano Final"})]})}),(0,t.jsx)("li",{className:"md:flex-1"})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Detalhes do Paciente"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nome"}),(0,t.jsx)("p",{className:"text-base text-gray-800 dark:text-gray-200",children:x.patient_data.name})]}),x.patient_data.age&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Idade"}),(0,t.jsxs)("p",{className:"text-base text-gray-800 dark:text-gray-200",children:[x.patient_data.age," anos"]})]}),x.patient_data.gender&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"G\xeanero"}),(0,t.jsx)("p",{className:"text-base text-gray-800 dark:text-gray-200",children:"female"===x.patient_data.gender?"Feminino":"Masculino"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Criado em"}),(0,t.jsx)("p",{className:"text-base text-gray-800 dark:text-gray-200",children:new Date(x.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),!w.complete&&(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)(c(),{href:j.current?"/plans/".concat(x.id,"/questionnaire"):b.current?"/plans/".concat(x.id,"/lab"):N.current?"/plans/".concat(x.id,"/tcm"):v.current?"/plans/".concat(x.id,"/timeline"):_.current?"/plans/".concat(x.id,"/ifm"):w.current?"/plans/".concat(x.id,"/final"):"#",className:"btn-primary ".concat(j.current||b.current||N.current||v.current||_.current||w.current?"":"opacity-50 cursor-not-allowed"),children:"Continuar preenchendo"})})]})]})]})})})}},4842:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(7876);r(4232);var s=r(7328),l=r.n(s),n=r(2471),c=r(8230),i=r.n(c),d=r(9099);let o=e=>{let{children:a,title:r="Lyz - Planos C\xedclicos Personalizados"}=e,{user:s,logout:c,isAuthenticated:o,isSuperadmin:m}=(0,n.As)(),x=(0,d.useRouter)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{children:[(0,t.jsx)("title",{children:r}),(0,t.jsx)("meta",{name:"description",content:"Sistema Lyz para planos personalizados baseados em ciclicidade feminina"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)(i(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"Lyz"})}),o&&(0,t.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,t.jsx)(i(),{href:"/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat("/dashboard"===x.pathname?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Dashboard"}),(0,t.jsx)(i(),{href:"/plans",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(x.pathname.startsWith("/plans")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Meus Planos"}),m&&(0,t.jsx)(i(),{href:"/admin/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(x.pathname.startsWith("/admin")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Administra\xe7\xe3o"})]})]}),(0,t.jsx)("div",{className:"flex items-center",children:o?(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Ol\xe1, ",null==s?void 0:s.name.split(" ")[0]]}),(0,t.jsx)("button",{onClick:c,className:"text-sm text-gray-700 hover:text-primary-600",children:"Sair"})]}):(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(i(),{href:"/auth/login",className:"text-sm font-medium text-gray-700 hover:text-primary-600",children:"Entrar"}),(0,t.jsx)(i(),{href:"/auth/register",className:"text-sm font-medium bg-primary-600 text-white px-3 py-1 rounded-md hover:bg-primary-700",children:"Registrar"})]})})]})})}),(0,t.jsx)("main",{className:"flex-grow",children:a}),(0,t.jsx)("footer",{className:"bg-white border-t border-gray-200 py-4 mt-auto",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["\xa9 ",new Date().getFullYear()," Lyz Healthcare. Todos os direitos reservados."]})})})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[695,636,593,792],()=>a(2032)),_N_E=e.O()}]);