(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[848],{677:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/plans",function(){return a(5399)}])},4842:(e,s,a)=>{"use strict";a.d(s,{A:()=>x});var r=a(7876);a(4232);var t=a(7328),n=a.n(t),l=a(2471),i=a(8230),d=a.n(i),c=a(9099);let x=e=>{let{children:s,title:a="Lyz - Planos C\xedclicos Personalizados"}=e,{user:t,logout:i,isAuthenticated:x,isSuperadmin:m}=(0,l.As)(),o=(0,c.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:a}),(0,r.jsx)("meta",{name:"description",content:"Sistema Lyz para planos personalizados baseados em ciclicidade feminina"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,r.jsx)(d(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"Lyz"})}),x&&(0,r.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,r.jsx)(d(),{href:"/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat("/dashboard"===o.pathname?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Dashboard"}),(0,r.jsx)(d(),{href:"/plans",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(o.pathname.startsWith("/plans")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Meus Planos"}),m&&(0,r.jsx)(d(),{href:"/admin/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(o.pathname.startsWith("/admin")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Administra\xe7\xe3o"})]})]}),(0,r.jsx)("div",{className:"flex items-center",children:x?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-700",children:["Ol\xe1, ",null==t?void 0:t.name.split(" ")[0]]}),(0,r.jsx)("button",{onClick:i,className:"text-sm text-gray-700 hover:text-primary-600",children:"Sair"})]}):(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(d(),{href:"/auth/login",className:"text-sm font-medium text-gray-700 hover:text-primary-600",children:"Entrar"}),(0,r.jsx)(d(),{href:"/auth/register",className:"text-sm font-medium bg-primary-600 text-white px-3 py-1 rounded-md hover:bg-primary-700",children:"Registrar"})]})})]})})}),(0,r.jsx)("main",{className:"flex-grow",children:s}),(0,r.jsx)("footer",{className:"bg-white border-t border-gray-200 py-4 mt-auto",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["\xa9 ",new Date().getFullYear()," Lyz Healthcare. Todos os direitos reservados."]})})})]})]})}},5399:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var r=a(7876),t=a(4232),n=a(9099),l=a(8230),i=a.n(l),d=a(4842),c=a(2471),x=a(1059);let m=()=>{let{user:e,loading:s}=(0,c.As)(),a=(0,n.useRouter)(),[l,m]=(0,t.useState)([]),[o,h]=(0,t.useState)(!0),[p,g]=(0,t.useState)(null);return((0,t.useEffect)(()=>{e||s||a.push("/auth/login")},[e,s,a]),(0,t.useEffect)(()=>{let s=async()=>{try{h(!0);let e=await x.a7.getUserPlans();m(e.data.plans||[]),g(null)}catch(e){g("Erro ao carregar planos: "+(e.message||"Tente novamente mais tarde")),console.error("Error fetching plans:",e)}finally{h(!1)}};e&&s()},[e]),s)?(0,r.jsx)("div",{children:"Carregando..."}):e?(0,r.jsx)(d.A,{title:"Meus Planos - Lyz",children:(0,r.jsx)("div",{className:"py-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Meus Planos"}),(0,r.jsx)(i(),{href:"/plans/new",className:"btn-primary",children:"Criar Novo Plano"})]}),o?(0,r.jsx)("div",{className:"flex justify-center py-10",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"spinner-border h-8 w-8 text-primary-600 animate-spin"}),(0,r.jsx)("p",{className:"mt-3 text-gray-600",children:"Carregando planos..."})]})}):p?(0,r.jsx)("div",{className:"bg-red-50 p-4 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-600",children:p})}):0===l.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Voc\xea ainda n\xe3o criou nenhum plano."}),(0,r.jsx)(i(),{href:"/plans/new",className:"btn-primary",children:"Criar seu primeiro plano"})]}):(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden rounded-md",children:(0,r.jsx)("ul",{className:"divide-y divide-gray-200",children:l.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(i(),{href:"/plans/".concat(e.id),className:"block hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"px-4 py-4 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"text-lg font-medium text-primary-600 truncate",children:e.patient_data.name}),(0,r.jsx)("div",{className:"ml-2 flex-shrink-0 flex",children:(0,r.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:e.professional_type})})]}),(0,r.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,r.jsx)("div",{className:"sm:flex",children:(0,r.jsx)("p",{className:"flex items-center text-sm text-gray-500",children:e.patient_data.gender&&e.patient_data.age?(0,r.jsxs)(r.Fragment,{children:["female"===e.patient_data.gender?"Feminino":"Masculino",","," ",e.patient_data.age," anos"]}):"Dados do paciente"})}),(0,r.jsx)("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:(0,r.jsxs)("p",{children:["Criado em"," ",new Date(e.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})]})})]})]})})},e.id))})})]})})}):null}}},e=>{var s=s=>e(e.s=s);e.O(0,[695,636,593,792],()=>s(677)),_N_E=e.O()}]);