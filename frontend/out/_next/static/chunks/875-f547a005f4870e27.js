"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{4842:(e,a,r)=>{r.d(a,{A:()=>c});var t=r(7876);r(4232);var s=r(7328),i=r.n(s),o=r(2471),n=r(8230),l=r.n(n),d=r(9099);let c=e=>{let{children:a,title:r="Lyz - Planos C\xedclicos Personalizados"}=e,{user:s,logout:n,isAuthenticated:c,isSuperadmin:m}=(0,o.As)(),u=(0,d.useRouter)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i(),{children:[(0,t.jsx)("title",{children:r}),(0,t.jsx)("meta",{name:"description",content:"Sistema Lyz para planos personalizados baseados em ciclicidade feminina"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)(l(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"Lyz"})}),c&&(0,t.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,t.jsx)(l(),{href:"/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat("/dashboard"===u.pathname?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Dashboard"}),(0,t.jsx)(l(),{href:"/plans",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(u.pathname.startsWith("/plans")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Meus Planos"}),m&&(0,t.jsx)(l(),{href:"/admin/dashboard",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(u.pathname.startsWith("/admin")?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:"Administra\xe7\xe3o"})]})]}),(0,t.jsx)("div",{className:"flex items-center",children:c?(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Ol\xe1, ",null==s?void 0:s.name.split(" ")[0]]}),(0,t.jsx)("button",{onClick:n,className:"text-sm text-gray-700 hover:text-primary-600",children:"Sair"})]}):(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(l(),{href:"/auth/login",className:"text-sm font-medium text-gray-700 hover:text-primary-600",children:"Entrar"}),(0,t.jsx)(l(),{href:"/auth/register",className:"text-sm font-medium bg-primary-600 text-white px-3 py-1 rounded-md hover:bg-primary-700",children:"Registrar"})]})})]})})}),(0,t.jsx)("main",{className:"flex-grow",children:a}),(0,t.jsx)("footer",{className:"bg-white border-t border-gray-200 py-4 mt-auto",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["\xa9 ",new Date().getFullYear()," Lyz Healthcare. Todos os direitos reservados."]})})})]})]})}},5454:(e,a,r)=>{r.d(a,{A:()=>n});var t=r(7876),s=r(4232),i=r(1040);let o=e=>{let{onTranscriptionComplete:a,buttonText:r="Gravar \xc1udio"}=e,[o,n]=(0,s.useState)(!1),[l,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(0),x=(0,s.useRef)(null),h=(0,s.useRef)([]),g=(0,s.useRef)(null),f=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});x.current=new MediaRecorder(e),h.current=[],x.current.ondataavailable=e=>{e.data.size>0&&h.current.push(e.data)},x.current.onstop=()=>{let e=new Blob(h.current,{type:"audio/wav"});d(e)},x.current.start(),n(!0),p(0),g.current=setInterval(()=>{p(e=>e+1)},1e3)}catch(e){console.error("Erro ao iniciar grava\xe7\xe3o:",e),alert("N\xe3o foi poss\xedvel acessar o microfone. Verifique as permiss\xf5es do navegador.")}},b=async()=>{if(!l)return;m(!0);let e=new FormData;e.append("audio",l,"recording.wav");try{let r=new Date().getTime();console.log("Enviando para URL direta com timestamp:","https://apilyz.marcussviniciusa.cloud/api/transcribe?t=".concat(r));let t=i.A.create({baseURL:"https://apilyz.marcussviniciusa.cloud",withCredentials:!0,headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),s=await t.post("/api/transcribe",e);if(s.data&&void 0!==s.data.transcription){let e=s.data.transcription,r=s.data.source||"desconhecido";""===e.trim()?(console.warn("Transcri\xe7\xe3o vazia recebida da fonte:",r),alert("N\xe3o foi poss\xedvel extrair texto do \xe1udio. Por favor, tente novamente falando mais claramente.")):(console.log("Transcri\xe7\xe3o bem-sucedida usando: ".concat(r)),a(e))}else console.error("Resposta da API n\xe3o cont\xe9m campo de transcri\xe7\xe3o:",s.data),alert("Erro no formato da resposta de transcri\xe7\xe3o. Por favor, tente novamente.")}catch(a){var r,t;console.error("Erro na transcri\xe7\xe3o:",a);let e=(null===(t=a.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||a.message||"Erro desconhecido";alert("Erro ao transcrever o \xe1udio: ".concat(e))}finally{m(!1),d(null)}};return(0,t.jsx)("div",{className:"audio-recorder mt-2 flex flex-col items-start space-y-2",children:(0,t.jsxs)("div",{className:"controls flex items-center space-x-2",children:[!o&&!l&&(0,t.jsxs)("button",{onClick:f,className:"btn-secondary flex items-center space-x-1 text-sm",type:"button",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),(0,t.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),(0,t.jsx)("line",{x1:"12",x2:"12",y1:"19",y2:"22"})]}),(0,t.jsx)("span",{children:r})]}),o&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"recording-indicator animate-pulse text-red-500",children:"â—"}),(0,t.jsx)("span",{className:"recording-time",children:(e=>{let a=Math.floor(e/60);return"".concat(a.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))})(u)}),(0,t.jsx)("button",{onClick:()=>{x.current&&o&&(x.current.stop(),n(!1),g.current&&(clearInterval(g.current),g.current=null),x.current.stream.getTracks().forEach(e=>e.stop()))},className:"btn-danger text-sm",type:"button",children:"Parar"})]}),l&&!c&&(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"\xc1udio gravado"}),(0,t.jsx)("button",{onClick:b,className:"btn-primary text-sm",type:"button",children:"Transcrever"})]}),c&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"spinner-border h-4 w-4 text-primary-600 animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Transcrevendo..."})]})]})})},n=e=>{let{onFormDataChange:a,currentData:r,formType:i}=e,[n,l]=(0,s.useState)("form"),[d,c]=(0,s.useState)(""),m=(e,a)=>{let r=e.toLowerCase();for(let t of a){let a=r.indexOf(t.toLowerCase());if(-1!==a){let s=a+t.length,i=r.indexOf(".",s);if(-1!==i)return e.substring(s,i).trim();return e.substring(s).trim()}}return""};return(0,t.jsxs)("div",{className:"form-input-options mt-4 mb-8 border rounded-lg p-4 bg-gray-50",children:[(0,t.jsxs)("div",{className:"tabs flex border-b mb-4",children:[(0,t.jsx)("button",{className:"tab-button px-4 py-2 ".concat("form"===n?"border-b-2 border-primary text-primary font-medium":"text-gray-600"),onClick:()=>l("form"),children:"Preencher Formul\xe1rio"}),(0,t.jsx)("button",{className:"tab-button px-4 py-2 ".concat("audio"===n?"border-b-2 border-primary text-primary font-medium":"text-gray-600"),onClick:()=>l("audio"),children:"Gravar \xc1udio"}),(0,t.jsx)("button",{className:"tab-button px-4 py-2 ".concat("summary"===n?"border-b-2 border-primary text-primary font-medium":"text-gray-600"),onClick:()=>l("summary"),children:"Resumo de Texto"})]}),(0,t.jsxs)("div",{className:"tab-content",children:["form"===n&&(0,t.jsx)("div",{className:"form-note text-xs text-gray-500 italic mb-2",children:"Preencha o formul\xe1rio abaixo com as informa\xe7\xf5es detalhadas."}),"audio"===n&&(0,t.jsxs)("div",{className:"audio-input p-4 bg-white rounded border mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Instru\xe7\xf5es para grava\xe7\xe3o:"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Grave um \xe1udio descrevendo todas as informa\xe7\xf5es relevantes para este formul\xe1rio. O sistema tentar\xe1 extrair automaticamente os dados para os campos apropriados."}),(0,t.jsx)(o,{onTranscriptionComplete:e=>{"questionnaire"===i?a({chiefComplaints:m(e,["queixa principal","queixas principais","motivo da consulta"]),medicalHistory:m(e,["hist\xf3rico m\xe9dico","hist\xf3ria m\xe9dica","antecedentes"]),familyHistory:m(e,["hist\xf3rico familiar","antecedentes familiares"]),medications:m(e,["medicamentos","medica\xe7\xf5es","rem\xe9dios"]),supplements:m(e,["suplementos","vitaminas"]),allergies:m(e,["alergias","alergia"]),lifestyle:{diet:m(e,["dieta","alimenta\xe7\xe3o"]),exercise:m(e,["exerc\xedcio","atividade f\xedsica"]),sleep:m(e,["sono","dorme"]),stress:m(e,["estresse","ansiedade"])},digestion:m(e,["digest\xe3o","intestino"]),energy:m(e,["energia","cansa\xe7o","fadiga"]),additional:e}):"tcm"===i&&a({tongue:{color:m(e,["cor da l\xedngua","l\xedngua cor"]),coating:m(e,["cobertura da l\xedngua","revestimento da l\xedngua"]),shape:m(e,["forma da l\xedngua","l\xedngua forma"]),moisture:m(e,["umidade da l\xedngua","l\xedngua \xfamida","l\xedngua seca"]),notes:m(e,["notas da l\xedngua","observa\xe7\xf5es da l\xedngua"])},pulse:{rate:m(e,["frequ\xeancia do pulso","pulso frequ\xeancia"]),strength:m(e,["for\xe7a do pulso","pulso for\xe7a"]),rhythm:m(e,["ritmo do pulso","pulso ritmo"]),quality:m(e,["qualidade do pulso","pulso qualidade"]),notes:m(e,["notas do pulso","observa\xe7\xf5es do pulso"])},pattern_diagnosis:m(e,["diagn\xf3stico de padr\xe3o","padr\xe3o tcm"]),treatment_principles:m(e,["princ\xedpios de tratamento","tratamento"]),additional_notes:e})},buttonText:"Iniciar Grava\xe7\xe3o"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:'Dica: Mencione claramente cada aspecto relevante precedido pela categoria, por exemplo: "Queixa principal: dor de cabe\xe7a frequente."'})]}),"summary"===n&&(0,t.jsxs)("div",{className:"summary-input p-4 bg-white rounded border mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Resumo de texto:"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Digite um resumo com todas as informa\xe7\xf5es relevantes. O sistema tentar\xe1 extrair automaticamente os dados para os campos apropriados."}),(0,t.jsx)("textarea",{className:"w-full p-2 border rounded",rows:8,value:d,onChange:e=>c(e.target.value),placeholder:"Digite seu resumo aqui..."}),(0,t.jsx)("button",{className:"btn-primary mt-2",onClick:()=>{"questionnaire"===i?a({chiefComplaints:m(d,["queixa principal","queixas principais","motivo da consulta"]),medicalHistory:m(d,["hist\xf3rico m\xe9dico","hist\xf3ria m\xe9dica","antecedentes"]),familyHistory:m(d,["hist\xf3rico familiar","antecedentes familiares"]),medications:m(d,["medicamentos","medica\xe7\xf5es","rem\xe9dios"]),supplements:m(d,["suplementos","vitaminas"]),allergies:m(d,["alergias","alergia"]),lifestyle:{diet:m(d,["dieta","alimenta\xe7\xe3o"]),exercise:m(d,["exerc\xedcio","atividade f\xedsica"]),sleep:m(d,["sono","dorme"]),stress:m(d,["estresse","ansiedade"])},digestion:m(d,["digest\xe3o","intestino"]),energy:m(d,["energia","cansa\xe7o","fadiga"]),additional:d}):"tcm"===i&&a({tongue:{color:m(d,["cor da l\xedngua","l\xedngua cor"]),coating:m(d,["cobertura da l\xedngua","revestimento da l\xedngua"]),shape:m(d,["forma da l\xedngua","l\xedngua forma"]),moisture:m(d,["umidade da l\xedngua","l\xedngua \xfamida","l\xedngua seca"]),notes:m(d,["notas da l\xedngua","observa\xe7\xf5es da l\xedngua"])},pulse:{rate:m(d,["frequ\xeancia do pulso","pulso frequ\xeancia"]),strength:m(d,["for\xe7a do pulso","pulso for\xe7a"]),rhythm:m(d,["ritmo do pulso","pulso ritmo"]),quality:m(d,["qualidade do pulso","pulso qualidade"]),notes:m(d,["notas do pulso","observa\xe7\xf5es do pulso"])},pattern_diagnosis:m(d,["diagn\xf3stico de padr\xe3o","padr\xe3o tcm"]),treatment_principles:m(d,["princ\xedpios de tratamento","tratamento"]),additional_notes:d}),l("form")},disabled:!d.trim(),children:"Processar Resumo"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:'Dica: Estruture seu texto com categorias claras, por exemplo: "Queixa principal: dor de cabe\xe7a frequente. Hist\xf3rico m\xe9dico: hipertens\xe3o..."'})]})]})]})}}}]);